// This file is auto-generated.

use std::collections::HashMap;
use serde::{Serialize, Deserialize};

pub use tx3_sdk::trp::ClientOptions;
use tx3_sdk::core::{TirEnvelope, BytesEncoding};
use tx3_sdk::trp::{ResolveParams, TxEnvelope, SubmitParams, SubmitResponse};

pub const DEFAULT_TRP_ENDPOINT: &str = "http://localhost:8164";

pub const DEFAULT_HEADERS: &[(&str, &str)] = &[
];

pub const DEPLOY_IR: &str = "ab6466656573a1694576616c506172616d6a457870656374466565736a7265666572656e6365738066696e7075747382a3646e616d656d6f6e655f73686f745f7574786f657574786f73a1694576616c506172616da16b457870656374496e707574826d6f6e655f73686f745f7574786fa56761646472657373a1694576616c506172616da16b45787065637456616c7565826c676974686f6e65796164647267416464726573736a6d696e5f616d6f756e74644e6f6e6563726566a1694576616c506172616da16b45787065637456616c756582687574786f5f726566675574786f526566646d616e79f46a636f6c6c61746572616cf46872656465656d6572644e6f6e65a3646e616d656f676974686f6e65795f77616c6c6574657574786f73a1694576616c506172616da16b457870656374496e707574826f676974686f6e65795f77616c6c6574a56761646472657373a1694576616c506172616da16b45787065637456616c7565826c676974686f6e65796164647267416464726573736a6d696e5f616d6f756e74a16641737365747381a366706f6c696379644e6f6e656a61737365745f6e616d65644e6f6e6566616d6f756e74a1664e756d6265721a004c4b4063726566644e6f6e65646d616e79f56a636f6c6c61746572616cf46872656465656d6572644e6f6e65676f75747075747381a46761646472657373a1694576616c506172616da16b45787065637456616c7565826c676974686f6e657961646472674164647265737365646174756d644e6f6e6566616d6f756e74a16b4576616c4275696c74496ea16353756282a16b4576616c4275696c74496ea16353756282a16b4576616c4275696c74496ea16341646482a16a4576616c436f65726365a16a496e746f417373657473a1694576616c506172616da16b457870656374496e707574826d6f6e655f73686f745f7574786fa56761646472657373a1694576616c506172616da16b45787065637456616c7565826c676974686f6e65796164647267416464726573736a6d696e5f616d6f756e74644e6f6e6563726566a1694576616c506172616da16b45787065637456616c756582687574786f5f726566675574786f526566646d616e79f46a636f6c6c61746572616cf4a16a4576616c436f65726365a16a496e746f417373657473a1694576616c506172616da16b457870656374496e707574826f676974686f6e65795f77616c6c6574a56761646472657373a1694576616c506172616da16b45787065637456616c7565826c676974686f6e65796164647267416464726573736a6d696e5f616d6f756e74a16641737365747381a366706f6c696379644e6f6e656a61737365745f6e616d65644e6f6e6566616d6f756e74a1664e756d6265721a004c4b4063726566644e6f6e65646d616e79f56a636f6c6c61746572616cf4a1694576616c506172616d6a45787065637446656573a16641737365747381a366706f6c696379644e6f6e656a61737365745f6e616d65644e6f6e6566616d6f756e74a1664e756d6265721a004c4b40686f7074696f6e616cf46876616c6964697479f6656d696e747381a266616d6f756e74a16641737365747381a366706f6c696379a1694576616c506172616da16b45787065637456616c7565827273657474696e67735f706f6c6963795f69646542797465736a61737365745f6e616d65a1694576616c506172616da16b45787065637456616c7565827373657474696e67735f746f6b656e5f6e616d6565427974657366616d6f756e74a1664e756d626572016872656465656d6572a166537472756374a26b636f6e7374727563746f7200666669656c647380656275726e7380656164686f6382a2646e616d656f63617264616e6f5f7075626c6973686464617461a56776657273696f6ea1694576616c506172616da16b45787065637456616c7565826e7363726970745f76657273696f6e63496e7466736372697074a1694576616c506172616da16b45787065637456616c7565826f676974686f6e65795f73637269707465427974657362746fa1694576616c506172616da16b45787065637456616c75658266736372697074674164647265737365646174756da166537472756374a26b636f6e7374727563746f7200666669656c647383a166537472756374a26b636f6e7374727563746f7200666669656c647382a166537472756374a26b636f6e7374727563746f7200666669656c647381a1694576616c506172616da16b45787065637456616c756582781b676974686f6e65795f7061796d656e745f63726564656e7469616c654279746573a166537472756374a26b636f6e7374727563746f7200666669656c647381a166537472756374a26b636f6e7374727563746f7200666669656c647381a166537472756374a26b636f6e7374727563746f7200666669656c647381a1694576616c506172616da16b45787065637456616c756582781b676974686f6e65795f7374616b696e675f63726564656e7469616c654279746573a1694576616c506172616da16b45787065637456616c7565826c6372656174696f6e5f66656563496e74a1694576616c506172616da16b45787065637456616c7565826a7265776172645f66656563496e7466616d6f756e74a16b4576616c4275696c74496ea16341646482a16641737365747381a366706f6c696379644e6f6e656a61737365745f6e616d65644e6f6e6566616d6f756e74a1664e756d6265721a004c4b40a16641737365747381a366706f6c696379a1694576616c506172616da16b45787065637456616c7565827273657474696e67735f706f6c6963795f69646542797465736a61737365745f6e616d65a1694576616c506172616da16b45787065637456616c7565827373657474696e67735f746f6b656e5f6e616d6565427974657366616d6f756e74a1664e756d62657201a2646e616d656e706c757475735f7769746e6573736464617461a26776657273696f6ea1694576616c506172616da16b45787065637456616c756582781873657474696e67735f6d696e74696e675f76657273696f6e63496e7466736372697074a1694576616c506172616da16b45787065637456616c7565827773657474696e67735f6d696e74696e675f706f6c6963796542797465736a636f6c6c61746572616c81a1657574786f73a1694576616c506172616da16b457870656374496e707574826a636f6c6c61746572616ca56761646472657373a1694576616c506172616da16b45787065637456616c7565826c676974686f6e65796164647267416464726573736a6d696e5f616d6f756e74a16641737365747381a366706f6c696379644e6f6e656a61737365745f6e616d65644e6f6e6566616d6f756e74a1664e756d6265721a004c4b4063726566644e6f6e65646d616e79f46a636f6c6c61746572616cf5677369676e657273f6686d6574616461746180";

#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct DeployParams {
    pub creation_fee: String,
    pub githoney_payment_credential: String,
    pub githoney_script: String,
    pub githoney_staking_credential: String,
    pub githoneyaddr: String,
    pub reward_fee: String,
    pub script: String,
    pub script_version: String,
    pub settings_minting_policy: String,
    pub settings_minting_version: String,
    pub settings_policy_id: String,
    pub settings_token_name: String,
    pub utxo_ref: String,
}
impl DeployParams {
    fn to_map(&self) -> serde_json::Map<String, serde_json::Value> {
        let mut map = serde_json::Map::new();

        map.insert("creation_fee".to_string(), serde_json::json!(&self.creation_fee));
        map.insert("githoney_payment_credential".to_string(), serde_json::json!(&self.githoney_payment_credential));
        map.insert("githoney_script".to_string(), serde_json::json!(&self.githoney_script));
        map.insert("githoney_staking_credential".to_string(), serde_json::json!(&self.githoney_staking_credential));
        map.insert("githoneyaddr".to_string(), serde_json::json!(&self.githoneyaddr));
        map.insert("reward_fee".to_string(), serde_json::json!(&self.reward_fee));
        map.insert("script".to_string(), serde_json::json!(&self.script));
        map.insert("script_version".to_string(), serde_json::json!(&self.script_version));
        map.insert("settings_minting_policy".to_string(), serde_json::json!(&self.settings_minting_policy));
        map.insert("settings_minting_version".to_string(), serde_json::json!(&self.settings_minting_version));
        map.insert("settings_policy_id".to_string(), serde_json::json!(&self.settings_policy_id));
        map.insert("settings_token_name".to_string(), serde_json::json!(&self.settings_token_name));
        map.insert("utxo_ref".to_string(), serde_json::json!(&self.utxo_ref));

        map.into()
    }
}

pub const CREATE_WITH_LOVELACE_IR: &str = "ab6466656573a1694576616c506172616d6a457870656374466565736a7265666572656e63657381a1694576616c506172616da16b45787065637456616c7565826c73657474696e67735f726566675574786f52656666696e7075747381a3646e616d65706d61696e7461696e65725f696e707574657574786f73a1694576616c506172616da16b457870656374496e70757482706d61696e7461696e65725f696e707574a56761646472657373a1694576616c506172616da16b45787065637456616c7565826a6d61696e7461696e657267416464726573736a6d696e5f616d6f756e74a16b4576616c4275696c74496ea16341646482a16b4576616c4275696c74496ea16341646482a16b4576616c4275696c74496ea16341646482a16c4576616c436f6d70696c6572a16e436f6d707574654d696e5574786fa1664e756d62657200a16c4576616c436f6d70696c6572a16e436f6d707574654d696e5574786fa1664e756d62657202a16641737365747381a366706f6c696379644e6f6e656a61737365745f6e616d65644e6f6e6566616d6f756e74a16b4576616c4275696c74496ea16341646482a1694576616c506172616da16b45787065637456616c75658273626f756e74795f6372656174696f6e5f66656563496e74a1694576616c506172616da16b45787065637456616c7565826d7265776172645f616d6f756e7463496e74a1694576616c506172616d6a4578706563744665657363726566644e6f6e65646d616e79f46a636f6c6c61746572616cf46872656465656d6572644e6f6e65676f75747075747383a46761646472657373a1694576616c506172616da16b45787065637456616c75658266736372697074674164647265737365646174756da166537472756374a26b636f6e7374727563746f7200666669656c647387a166537472756374a26b636f6e7374727563746f7200666669656c647381a1694576616c506172616da16b45787065637456616c7565827161646d696e5f7061796d656e745f6b6579654279746573a166537472756374a26b636f6e7374727563746f7200666669656c647382a166537472756374a26b636f6e7374727563746f7200666669656c647381a1694576616c506172616da16b45787065637456616c756582766d61696e7461696e65725f7061796d656e745f6b6579654279746573a166537472756374a26b636f6e7374727563746f7200666669656c647381a166537472756374a26b636f6e7374727563746f7200666669656c647381a166537472756374a26b636f6e7374727563746f7200666669656c647381a1694576616c506172616da16b45787065637456616c756582746d61696e7461696e65725f7374616b655f6b6579654279746573a166537472756374a26b636f6e7374727563746f7201666669656c647380a1694576616c506172616da16b45787065637456616c75658272626f756e74795f726577617264735f66656563496e74a1694576616c506172616da16b45787065637456616c7565826a74696d655f6c696d697463496e74a164426f6f6cf4a1634d61708182a166537472696e6760a1634d61708182a166537472696e6760a16b4576616c4275696c74496ea16341646482a1694576616c506172616da16b45787065637456616c756582676d696e5f61646163496e74a1694576616c506172616da16b45787065637456616c7565826d7265776172645f616d6f756e7463496e7466616d6f756e74a16b4576616c4275696c74496ea16341646482a16641737365747381a366706f6c696379644e6f6e656a61737365745f6e616d65644e6f6e6566616d6f756e74a16b4576616c4275696c74496ea16341646482a1694576616c506172616da16b45787065637456616c756582676d696e5f61646163496e74a1694576616c506172616da16b45787065637456616c7565826d7265776172645f616d6f756e7463496e74a16641737365747381a366706f6c696379a1694576616c506172616da16b45787065637456616c756582716d696e74696e675f706f6c6963795f69646542797465736a61737365745f6e616d65a1694576616c506172616da16b45787065637456616c75658269626f756e74795f696465427974657366616d6f756e74a1664e756d62657201686f7074696f6e616cf4a46761646472657373a1694576616c506172616da16b45787065637456616c7565826c676974686f6e657961646472674164647265737365646174756d644e6f6e6566616d6f756e74a16641737365747381a366706f6c696379644e6f6e656a61737365745f6e616d65644e6f6e6566616d6f756e74a1694576616c506172616da16b45787065637456616c75658273626f756e74795f6372656174696f6e5f66656563496e74686f7074696f6e616cf4a46761646472657373a1694576616c506172616da16b45787065637456616c7565826a6d61696e7461696e6572674164647265737365646174756d644e6f6e6566616d6f756e74a16b4576616c4275696c74496ea16353756282a16b4576616c4275696c74496ea16353756282a16a4576616c436f65726365a16a496e746f417373657473a1694576616c506172616da16b457870656374496e70757482706d61696e7461696e65725f696e707574a56761646472657373a1694576616c506172616da16b45787065637456616c7565826a6d61696e7461696e657267416464726573736a6d696e5f616d6f756e74a16b4576616c4275696c74496ea16341646482a16b4576616c4275696c74496ea16341646482a16b4576616c4275696c74496ea16341646482a16c4576616c436f6d70696c6572a16e436f6d707574654d696e5574786fa1664e756d62657200a16c4576616c436f6d70696c6572a16e436f6d707574654d696e5574786fa1664e756d62657202a16641737365747381a366706f6c696379644e6f6e656a61737365745f6e616d65644e6f6e6566616d6f756e74a16b4576616c4275696c74496ea16341646482a1694576616c506172616da16b45787065637456616c75658273626f756e74795f6372656174696f6e5f66656563496e74a1694576616c506172616da16b45787065637456616c7565826d7265776172645f616d6f756e7463496e74a1694576616c506172616d6a4578706563744665657363726566644e6f6e65646d616e79f46a636f6c6c61746572616cf4a16641737365747381a366706f6c696379644e6f6e656a61737365745f6e616d65644e6f6e6566616d6f756e74a16b4576616c4275696c74496ea16341646482a16b4576616c4275696c74496ea16341646482a1694576616c506172616da16b45787065637456616c75658273626f756e74795f6372656174696f6e5f66656563496e74a1694576616c506172616da16b45787065637456616c7565826d7265776172645f616d6f756e7463496e74a1694576616c506172616da16b45787065637456616c756582676d696e5f61646163496e74a1694576616c506172616d6a45787065637446656573686f7074696f6e616cf46876616c6964697479a26573696e6365a1694576616c506172616da16b45787065637456616c7565826573696e636563496e7465756e74696ca1694576616c506172616da16b45787065637456616c75658265756e74696c63496e74656d696e747381a266616d6f756e74a16641737365747381a366706f6c696379a1694576616c506172616da16b45787065637456616c756582716d696e74696e675f706f6c6963795f69646542797465736a61737365745f6e616d65a1694576616c506172616da16b45787065637456616c75658269626f756e74795f696465427974657366616d6f756e74a1664e756d626572016872656465656d6572a166537472756374a26b636f6e7374727563746f7200666669656c647380656275726e7380656164686f63806a636f6c6c61746572616c81a1657574786f73a1694576616c506172616da16b457870656374496e707574826a636f6c6c61746572616ca56761646472657373a1694576616c506172616da16b45787065637456616c7565826a6d61696e7461696e657267416464726573736a6d696e5f616d6f756e74a16641737365747381a366706f6c696379644e6f6e656a61737365745f6e616d65644e6f6e6566616d6f756e74a1664e756d6265721a004c4b4063726566644e6f6e65646d616e79f46a636f6c6c61746572616cf5677369676e657273f6686d6574616461746180";

#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct CreateWithLovelaceParams {
    pub admin_payment_key: String,
    pub bounty_creation_fee: String,
    pub bounty_id: String,
    pub bounty_rewards_fee: String,
    pub githoneyaddr: String,
    pub maintainer: String,
    pub maintainer_payment_key: String,
    pub maintainer_stake_key: String,
    pub min_ada: String,
    pub minting_policy_id: String,
    pub reward_amount: String,
    pub script: String,
    pub settings_ref: String,
    pub since: String,
    pub time_limit: String,
    pub until: String,
}
impl CreateWithLovelaceParams {
    fn to_map(&self) -> serde_json::Map<String, serde_json::Value> {
        let mut map = serde_json::Map::new();

        map.insert("admin_payment_key".to_string(), serde_json::json!(&self.admin_payment_key));
        map.insert("bounty_creation_fee".to_string(), serde_json::json!(&self.bounty_creation_fee));
        map.insert("bounty_id".to_string(), serde_json::json!(&self.bounty_id));
        map.insert("bounty_rewards_fee".to_string(), serde_json::json!(&self.bounty_rewards_fee));
        map.insert("githoneyaddr".to_string(), serde_json::json!(&self.githoneyaddr));
        map.insert("maintainer".to_string(), serde_json::json!(&self.maintainer));
        map.insert("maintainer_payment_key".to_string(), serde_json::json!(&self.maintainer_payment_key));
        map.insert("maintainer_stake_key".to_string(), serde_json::json!(&self.maintainer_stake_key));
        map.insert("min_ada".to_string(), serde_json::json!(&self.min_ada));
        map.insert("minting_policy_id".to_string(), serde_json::json!(&self.minting_policy_id));
        map.insert("reward_amount".to_string(), serde_json::json!(&self.reward_amount));
        map.insert("script".to_string(), serde_json::json!(&self.script));
        map.insert("settings_ref".to_string(), serde_json::json!(&self.settings_ref));
        map.insert("since".to_string(), serde_json::json!(&self.since));
        map.insert("time_limit".to_string(), serde_json::json!(&self.time_limit));
        map.insert("until".to_string(), serde_json::json!(&self.until));

        map.into()
    }
}

pub struct Client {
    client: tx3_sdk::trp::Client,
}

impl Client {
    pub fn new(options: ClientOptions) -> Self {
        Self {
            client: tx3_sdk::trp::Client::new(options),
        }
    }

    pub fn with_default_options() -> Self {
        let mut headers = HashMap::new();
        for (key, value) in DEFAULT_HEADERS {
            headers.insert(key.to_string(), value.to_string());
        }

        Self::new(ClientOptions {
            endpoint: DEFAULT_TRP_ENDPOINT.to_string(),
            headers: Some(headers),
        })
    }

    pub async fn deploy_tx(&self, args: DeployParams) -> Result<TxEnvelope, tx3_sdk::trp::Error> {
        let tir_info = TirEnvelope {
            content: DEPLOY_IR.to_string(),
            encoding: BytesEncoding::Hex,
            version: "v1beta0".to_string(),
        };

        self.client.resolve(ResolveParams {
            tir: tir_info,
            args: args.to_map(),
        }).await
    }

    pub async fn create_with_lovelace_tx(&self, args: CreateWithLovelaceParams) -> Result<TxEnvelope, tx3_sdk::trp::Error> {
        let tir_info = TirEnvelope {
            content: CREATE_WITH_LOVELACE_IR.to_string(),
            encoding: BytesEncoding::Hex,
            version: "v1beta0".to_string(),
        };

        self.client.resolve(ResolveParams {
            tir: tir_info,
            args: args.to_map(),
        }).await
    }

    pub async fn submit(&self, params: SubmitParams) -> Result<SubmitResponse, tx3_sdk::trp::Error> {
        self.client.submit(params).await
    }
}

// Create a default client instance
pub static PROTOCOL: once_cell::sync::Lazy<Client> = once_cell::sync::Lazy::new(|| Client::with_default_options());
